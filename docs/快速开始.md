# 🚀 快速开始指南

最快在 **5-10 分钟** 内看到 AI 自动标注效果！

---

## 📋 前置准备

### 1. 安装依赖

```bash
pip install opencv-python requests Pillow anthropic dashscope
```

### 2. 获取 API Key（任选一个）

#### Qwen 通义千问（推荐国内用户）
1. 访问：https://dashscope.console.aliyun.com/apiKey
2. 注册/登录阿里云账号
3. 创建 API Key
4. 设置环境变量：
   ```bash
   export DASHSCOPE_API_KEY="your-key"
   ```

#### Claude（推荐海外用户）
1. 访问：https://console.anthropic.com/
2. 注册账号并获取 API Key
3. 设置环境变量：
   ```bash
   export ANTHROPIC_API_KEY="your-key"
   ```

---

## ⚡ 方式一：图片快速测试（最快，3分钟）

**适合**：第一次使用，想快速看到效果

```bash
# 1. 设置 API Key（已设置可跳过）
export DASHSCOPE_API_KEY="your-key"

# 2. 标注图片（准备一张街景照片）
python3 scripts/image_auto_labeling.py 你的图片.jpg --provider qwen --visualize

# 3. 查看结果
# 生成的文件：
# - 你的图片_labeled.jpg  ← 带标注框的可视化结果
# - 你的图片_labels.json  ← Label Studio 格式的标注数据
```

**立即查看**：直接打开 `你的图片_labeled.jpg` 就能看到标注效果！

---

## 📹 方式二：视频自动标注（完整流程，10分钟）

**适合**：正式使用，标注视频数据

### 步骤 1：准备视频

```bash
mkdir -p data/videos
cp 你的视频.mp4 data/videos/
```

### 步骤 2：自动标注

```bash
# 使用 Qwen 标注（每30帧采样一次）
python3 scripts/video_auto_labeling.py data/videos/你的视频.mp4 \
    --provider qwen \
    --sample-rate 30

# 生成文件：你的视频_labels.json
```

**参数说明**：
- `--provider qwen` - 使用通义千问（也可选 `anthropic`、`openai`）
- `--sample-rate 30` - 每30帧标注一次（可调整，值越小越精细但成本越高）

### 步骤 3：启动 Label Studio

```bash
bash scripts/start_label_studio.sh

# 访问：http://localhost:8080
# 首次启动需创建账号
```

### 步骤 4：在 Label Studio 中查看

1. **创建项目**
   - 点击 "Create Project"
   - 选择 "Video Object Detection" 模板
   - 或使用 `templates/video_object_detection_motorbike.xml`

2. **导入视频**
   - 点击 "Import"
   - 上传你的视频文件

3. **导入标注**
   - 再次点击 "Import"
   - 上传 `你的视频_labels.json`
   - ⚠️ 选择 "Treat as predictions"（作为预测结果导入）

4. **查看和修正**
   - 点击任务开始标注
   - 查看 AI 生成的标注框
   - 手动调整不准确的标注
   - 完成后点击 "Submit"

---

## 🎯 方式三：YOLO 本地标注（免费，无需 API）

**适合**：没有 API Key，或想使用免费方案

```bash
# 使用 YOLO 标注（完全本地运行）
python3 scripts/yolo_auto_labeling.py data/videos/你的视频.mp4 \
    --model yolo11s.pt \
    --confidence 0.3 \
    --sample-rate 30

# 首次运行会自动下载模型
```

**优点**：
- ✅ 完全免费
- ✅ 本地运行，无需网络
- ✅ 速度快

**缺点**：
- ⚠️ 只支持固定的80个类别（COCO数据集）
- ⚠️ 准确度略低于 VLM

详细说明见 [YOLO_GUIDE.md](YOLO_GUIDE.md)

---

## 🎉 验证成功

当您看到以下内容，说明成功了：

✅ **图片标注**：
- 生成了 `*_labeled.jpg` 带标注框的图片
- 生成了 `*_labels.json` 标注数据文件

✅ **视频标注**：
- 生成了 `*_labels.json` 文件
- 在 Label Studio 中能看到标注框
- 可以手动调整标注

---

## ❓ 常见问题

### 1. API Key 错误

```bash
# 检查是否设置
echo $DASHSCOPE_API_KEY

# 如果为空，重新设置
export DASHSCOPE_API_KEY="your-key"

# 或者在命令中直接指定
DASHSCOPE_API_KEY="your-key" python3 scripts/image_auto_labeling.py ...
```

### 2. 找不到文件

```bash
# 使用绝对路径
python3 scripts/image_auto_labeling.py /完整/路径/图片.jpg --provider qwen
```

### 3. 标注不准确

**调整方案**：
- 换用更好的模型：`--provider anthropic`（Claude 准确度更高）
- 降低采样率：`--sample-rate 10`（标注更多帧，成本增加）
- 检查图片质量：模糊、遮挡会影响效果

### 4. Label Studio 启动失败

```bash
# 安装 Label Studio
pip install label-studio

# 手动启动
label-studio start
```

---

## 📚 进阶使用

- **[QWEN_GUIDE.md](QWEN_GUIDE.md)** - Qwen 详细使用指南
- **[AUTO_LABELING_GUIDE.md](AUTO_LABELING_GUIDE.md)** - 多模态大模型自动标注
- **[YOLO_GUIDE.md](YOLO_GUIDE.md)** - YOLO 本地模型使用

---

## 💡 推荐工作流程

### 初次测试（5分钟）
1. 用**方式一**测试一张图片
2. 查看 `_labeled.jpg` 确认效果
3. 满意后继续下一步

### 正式使用（批量标注）
1. 用**方式二**标注视频
2. 在 Label Studio 中审核和修正
3. 导出训练数据

### 经济实惠方案
1. 先用**方式三**（YOLO）快速标注
2. 对质量要求高的部分再用 VLM 精修

---

**现在就开始吧！选择上面任意一种方式开始测试 →**
